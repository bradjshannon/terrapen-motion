{
    "files.associations": {
        "*.ino": "cpp",
        "*.h": "c",
        "*.cpp": "cpp",
        "test_*.cpp": "cpp",
        "*test*.json": "json"
    },
    "C_Cpp.default.includePath": [
        "${workspaceFolder}/nano-firmware/src/**",
        "${workspaceFolder}/nano-firmware/test/framework/**", 
        "${workspaceFolder}/nano-firmware/.pio/libdeps/**",
        "${workspaceFolder}/nano-firmware/.pio/build/**/FrameworkArduino/**",
        "${workspaceFolder}/nano-firmware/.pio/build/**/FrameworkArduinoVariant/**",
        "${workspaceFolder}/esp32-controller/src/**",
        "${workspaceFolder}/esp32-controller/.pio/libdeps/**",
        "${workspaceFolder}/shared/**"
    ],
    "C_Cpp.default.defines": [
        "ARDUINO=10607",
        "__AVR_ATmega328P__",
        "F_CPU=16000000L",
        "UNIT_TEST"
    ],
    "C_Cpp.default.compilerPath": "${workspaceFolder}/nano-firmware/.pio/build/nano/idedata.json",
    "C_Cpp.default.cStandard": "c11",
    "C_Cpp.default.cppStandard": "c++11",
    "files.exclude": {
        "**/.pio": true,
        "**/.venv": true,
        "**/*.pyc": true,
        "**/__pycache__": true
    },
    "python.defaultInterpreterPath": "./.venv/Scripts/python.exe",
    "python.terminal.activateEnvironment": true,
    "editor.insertSpaces": true,
    "editor.tabSize": 4,
    "editor.detectIndentation": false,
    "[cpp]": {
        "editor.tabSize": 4,
        "editor.insertSpaces": true
    },
    "[c]": {
        "editor.tabSize": 4,
        "editor.insertSpaces": true
    },
    "terminal.integrated.cwd": "${workspaceFolder}",
    
    // === PLATFORMIO CONFIGURATION ===
    "platformio-ide.autoRebuildAutocompleteIndex": true,
    "platformio-ide.customPATH": null,
    "platformio-ide.useBuiltinPython": true,
    "platformio-ide.useBuiltinPIOCore": true,
    "platformio-ide.serialMonitor.autoconnect": false,
    "platformio-ide.serialMonitor.baudRate": 9600,
    "platformio-ide.serialMonitor.reopenSerialMonitor": true,
    "platformio-ide.activateProjectOnTextEditorChange": true,
    "platformio-ide.projectDirs": [
        "nano-firmware",
        "esp32-controller"
    ],
    
    // === DUAL-DEVICE WORKFLOW SETTINGS ===
    "taskExplorer.enableTaskButtons": true,
    "terminal.integrated.defaultProfile.windows": "PowerShell",
    
    // File watcher for automatic rebuilds
    "files.watcherExclude": {
        "**/.pio/**": true,
        "**/node_modules/**": true,
        "**/.venv/**": true
    },
    
    // Quick access recommendations
    "workbench.startupEditor": "none",
    "explorer.fileNesting.enabled": true,
    "explorer.fileNesting.patterns": {
        "*.cpp": "${capture}.h",
        "platformio.ini": ".pio"
    }
}